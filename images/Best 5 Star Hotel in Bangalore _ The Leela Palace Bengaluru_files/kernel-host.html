
<!-- saved from url=(0092)https://onboard.triptease.io/kernel/v6641.78397/kernel-host.html?originHost=www.theleela.com -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script type="text/javascript">//<![CDATA[
(()=>{var Rn=Object.create;var ie=Object.defineProperty,Mn=Object.defineProperties,Jt=Object.getOwnPropertyDescriptor,Dn=Object.getOwnPropertyDescriptors,jn=Object.getOwnPropertyNames,he=Object.getOwnPropertySymbols,Ln=Object.getPrototypeOf,ze=Object.prototype.hasOwnProperty,Zt=Object.prototype.propertyIsEnumerable;var Qt=(r,e,t)=>e in r?ie(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,O=(r,e)=>{for(var t in e||(e={}))ze.call(e,t)&&Qt(r,t,e[t]);if(he)for(var t of he(e))Zt.call(e,t)&&Qt(r,t,e[t]);return r},oe=(r,e)=>Mn(r,Dn(e)),En=r=>ie(r,"__esModule",{value:!0});var Xt=(r,e)=>{var t={};for(var n in r)ze.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&he)for(var n of he(r))e.indexOf(n)<0&&Zt.call(r,n)&&(t[n]=r[n]);return t};var E=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var Hn=(r,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of jn(e))!ze.call(r,n)&&n!=="default"&&ie(r,n,{get:()=>e[n],enumerable:!(t=Jt(e,n))||t.enumerable});return r},H=r=>Hn(En(ie(r!=null?Rn(Ln(r)):{},"default",r&&r.__esModule&&"default"in r?{get:()=>r.default,enumerable:!0}:{value:r,enumerable:!0})),r),ae=(r,e,t,n)=>{for(var i=n>1?void 0:n?Jt(e,t):e,o=r.length-1,a;o>=0;o--)(a=r[o])&&(i=(n?a(e,t,i):a(i))||i);return n&&i&&ie(e,t,i),i};var f=(r,e,t)=>new Promise((n,i)=>{var o=c=>{try{s(t.next(c))}catch(l){i(l)}},a=c=>{try{s(t.throw(c))}catch(l){i(l)}},s=c=>c.done?n(c.value):Promise.resolve(c.value).then(o,a);s((t=t.apply(r,e)).next())});var se=E((bo,ve)=>{var Yt,er,tr,rr,nr,ir,or,ar,sr,be,Je,cr,ur,J,dr,lr,pr,fr,gr,yr,mr,hr,xe;(function(r){var e=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&undefined?define("tslib",["exports"],function(n){r(t(e,t(n)))}):typeof ve=="object"&&typeof ve.exports=="object"?r(t(e,t(ve.exports))):r(t(e));function t(n,i){return n!==e&&(typeof Object.create=="function"?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(o,a){return n[o]=i?i(o,a):a}}})(function(r){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])};Yt=function(n,i){e(n,i);function o(){this.constructor=n}n.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)},er=Object.assign||function(n){for(var i,o=1,a=arguments.length;o<a;o++){i=arguments[o];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])}return n},tr=function(n,i){var o={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&i.indexOf(a)<0&&(o[a]=n[a]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,a=Object.getOwnPropertySymbols(n);s<a.length;s++)i.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(n,a[s])&&(o[a[s]]=n[a[s]]);return o},rr=function(n,i,o,a){var s=arguments.length,c=s<3?i:a===null?a=Object.getOwnPropertyDescriptor(i,o):a,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(n,i,o,a);else for(var h=n.length-1;h>=0;h--)(l=n[h])&&(c=(s<3?l(c):s>3?l(i,o,c):l(i,o))||c);return s>3&&c&&Object.defineProperty(i,o,c),c},nr=function(n,i){return function(o,a){i(o,a,n)}},ir=function(n,i){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,i)},or=function(n,i,o,a){function s(c){return c instanceof o?c:new o(function(l){l(c)})}return new(o||(o=Promise))(function(c,l){function h(S){try{y(a.next(S))}catch($){l($)}}function P(S){try{y(a.throw(S))}catch($){l($)}}function y(S){S.done?c(S.value):s(S.value).then(h,P)}y((a=a.apply(n,i||[])).next())})},ar=function(n,i){var o={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},a,s,c,l;return l={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function h(y){return function(S){return P([y,S])}}function P(y){if(a)throw new TypeError("Generator is already executing.");for(;o;)try{if(a=1,s&&(c=y[0]&2?s.return:y[0]?s.throw||((c=s.return)&&c.call(s),0):s.next)&&!(c=c.call(s,y[1])).done)return c;switch(s=0,c&&(y=[y[0]&2,c.value]),y[0]){case 0:case 1:c=y;break;case 4:return o.label++,{value:y[1],done:!1};case 5:o.label++,s=y[1],y=[0];continue;case 7:y=o.ops.pop(),o.trys.pop();continue;default:if(c=o.trys,!(c=c.length>0&&c[c.length-1])&&(y[0]===6||y[0]===2)){o=0;continue}if(y[0]===3&&(!c||y[1]>c[0]&&y[1]<c[3])){o.label=y[1];break}if(y[0]===6&&o.label<c[1]){o.label=c[1],c=y;break}if(c&&o.label<c[2]){o.label=c[2],o.ops.push(y);break}c[2]&&o.ops.pop(),o.trys.pop();continue}y=i.call(n,o)}catch(S){y=[6,S],s=0}finally{a=c=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},sr=function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&xe(i,n,o)},xe=Object.create?function(n,i,o,a){a===void 0&&(a=o),Object.defineProperty(n,a,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,a){a===void 0&&(a=o),n[a]=i[o]},be=function(n){var i=typeof Symbol=="function"&&Symbol.iterator,o=i&&n[i],a=0;if(o)return o.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&a>=n.length&&(n=void 0),{value:n&&n[a++],done:!n}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},Je=function(n,i){var o=typeof Symbol=="function"&&n[Symbol.iterator];if(!o)return n;var a=o.call(n),s,c=[],l;try{for(;(i===void 0||i-- >0)&&!(s=a.next()).done;)c.push(s.value)}catch(h){l={error:h}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(l)throw l.error}}return c},cr=function(){for(var n=[],i=0;i<arguments.length;i++)n=n.concat(Je(arguments[i]));return n},ur=function(){for(var n=0,i=0,o=arguments.length;i<o;i++)n+=arguments[i].length;for(var a=Array(n),s=0,i=0;i<o;i++)for(var c=arguments[i],l=0,h=c.length;l<h;l++,s++)a[s]=c[l];return a},J=function(n){return this instanceof J?(this.v=n,this):new J(n)},dr=function(n,i,o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=o.apply(n,i||[]),s,c=[];return s={},l("next"),l("throw"),l("return"),s[Symbol.asyncIterator]=function(){return this},s;function l(w){a[w]&&(s[w]=function(z){return new Promise(function($e,In){c.push([w,z,$e,In])>1||h(w,z)})})}function h(w,z){try{P(a[w](z))}catch($e){$(c[0][3],$e)}}function P(w){w.value instanceof J?Promise.resolve(w.value.v).then(y,S):$(c[0][2],w)}function y(w){h("next",w)}function S(w){h("throw",w)}function $(w,z){w(z),c.shift(),c.length&&h(c[0][0],c[0][1])}},lr=function(n){var i,o;return i={},a("next"),a("throw",function(s){throw s}),a("return"),i[Symbol.iterator]=function(){return this},i;function a(s,c){i[s]=n[s]?function(l){return(o=!o)?{value:J(n[s](l)),done:s==="return"}:c?c(l):l}:c}},pr=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n[Symbol.asyncIterator],o;return i?i.call(n):(n=typeof be=="function"?be(n):n[Symbol.iterator](),o={},a("next"),a("throw"),a("return"),o[Symbol.asyncIterator]=function(){return this},o);function a(c){o[c]=n[c]&&function(l){return new Promise(function(h,P){l=n[c](l),s(h,P,l.done,l.value)})}}function s(c,l,h,P){Promise.resolve(P).then(function(y){c({value:y,done:h})},l)}},fr=function(n,i){return Object.defineProperty?Object.defineProperty(n,"raw",{value:i}):n.raw=i,n};var t=Object.create?function(n,i){Object.defineProperty(n,"default",{enumerable:!0,value:i})}:function(n,i){n.default=i};gr=function(n){if(n&&n.__esModule)return n;var i={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&xe(i,n,o);return t(i,n),i},yr=function(n){return n&&n.__esModule?n:{default:n}},mr=function(n,i){if(!i.has(n))throw new TypeError("attempted to get private field on non-instance");return i.get(n)},hr=function(n,i,o){if(!i.has(n))throw new TypeError("attempted to set private field on non-instance");return i.set(n,o),o},r("__extends",Yt),r("__assign",er),r("__rest",tr),r("__decorate",rr),r("__param",nr),r("__metadata",ir),r("__awaiter",or),r("__generator",ar),r("__exportStar",sr),r("__createBinding",xe),r("__values",be),r("__read",Je),r("__spread",cr),r("__spreadArrays",ur),r("__await",J),r("__asyncGenerator",dr),r("__asyncDelegator",lr),r("__asyncValues",pr),r("__makeTemplateObject",fr),r("__importStar",gr),r("__importDefault",yr),r("__classPrivateFieldGet",mr),r("__classPrivateFieldSet",hr)})});var br=E(R=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});R.sum=R.subtract=R.add=R.increment=void 0;function qn(r){return r+1}R.increment=qn;function Nn(r,e){return e===void 0?t=>r+t:r+e}R.add=Nn;function Fn(r,e){return e===void 0?t=>t-r:r-e}R.subtract=Fn;R.sum=(r,e)=>r+e});var et=E(T=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0});T.AsyncSequence=T.Sequence=T.sequence=T.range=T.repeat=T.iterate=void 0;var Ze=br(),xr=Pe(),Qe=Z();function*we(r,e){for(;;)yield e,e=r(e)}T.iterate=we;function*Wn(r){for(;;)yield r()}T.repeat=Wn;function*Gn(r,e,t=1){if(t===0)throw new Error("step can not be 0");if(e===void 0)yield*we(Ze.add(t),r);else{let n=Math.abs(t);e<r?yield*Xe(we(Ze.subtract(n),r),xr.takeWhile(i=>i>=e)):yield*Xe(we(Ze.add(n),r),xr.takeWhile(i=>i<=e))}}T.range=Gn;function Xe(r,...e){return Qe.isIterable(r)?new Te(r,e):Qe.isArrayLike(r)?new Te(Qe.iterable(r),e):new Ye(r,e)}T.sequence=Xe;var Te=class{constructor(e,t){this.source=e,this.transducers=t}[Symbol.iterator](){return this.transducers.reduce((e,t)=>t.sync(e),this.source)[Symbol.iterator]()}};T.Sequence=Te;var Ye=class{constructor(e,t){this.source=e,this.transducers=t}[Symbol.asyncIterator](){return this.transducers.reduce((e,t)=>t.async_(e),this.source)[Symbol.asyncIterator]()}};T.AsyncSequence=Ye});var Z=E(m=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});m.AsyncIteratorHandler=m.single=m.by=m.toAsyncIterable=m.array=m.isArrayLike=m.asyncIterable=m.iterable=m.toIterable=m.isPromiseLike=m.isAsyncIterable=m.isIterable=m.value=m.key=m.comparators=m.descending=m.ascending=void 0;var q=se(),Se=et();function Ae(r,e){return r<e?-1:r>e?1:0}m.ascending=Ae;function Kn(r,e){return r<e?1:r>e?-1:0}m.descending=Kn;function Un(...r){return(e,t)=>{for(let n of r){let i=n(e,t);if(i!=0)return i}return 0}}m.comparators=Un;function Bn(r){return Object.assign(e=>e[r],{name:r})}m.key=Bn;function Vn(r){return e=>e[r]}m.value=Vn;function tt(r){return typeof r=="object"&&Symbol.iterator in r}m.isIterable=tt;function $n(r){return typeof r=="object"&&Symbol.asyncIterator in r}m.isAsyncIterable=$n;function zn(r){return typeof r=="object"&&"then"in r}m.isPromiseLike=zn;function Jn(...r){return r}m.toIterable=Jn;function*Zn(r){for(let e=0;e<r.length;e++)yield r[e]}m.iterable=Zn;function Qn(r){return q.__asyncGenerator(this,arguments,function*(){for(let t of r)yield yield q.__await(t)})}m.asyncIterable=Qn;function vr(r){return typeof r=="object"&&typeof r.length=="number"}m.isArrayLike=vr;function Xn(r,...e){return tt(r)||vr(r)?Yn(Se.sequence(r,...e)):ei(Se.sequence(r,...e))}m.array=Xn;function Yn(r){let e=[];for(let t of r)e.push(t);return e}function ei(r){var e,t,n,i;return q.__awaiter(this,void 0,void 0,function*(){let o=[];try{for(e=q.__asyncValues(r);t=yield e.next(),!t.done;){let a=t.value;o.push(a)}}catch(a){n={error:a}}finally{try{t&&!t.done&&(i=e.return)&&(yield i.call(e))}finally{if(n)throw n.error}}return o})}function ti(r){return q.__asyncGenerator(this,arguments,function*(){yield yield q.__await(r)})}m.toAsyncIterable=ti;function ri(r,e=Ae){return typeof r=="function"?ii(r,e):ni(r,e)}m.by=ri;function ni(r,e=Ae){return(t,n)=>e(t[r],n[r])}function ii(r,e=Ae){return(t,n)=>e(r(t),r(n))}function oi(r,...e){return tt(r)?ai(Se.sequence(r,...e)):si(Se.sequence(r,...e))}m.single=oi;function ai(r){for(let e of r)return e;throw new Error("Expected a single value")}function si(r){var e,t,n,i;return q.__awaiter(this,void 0,void 0,function*(){try{for(e=q.__asyncValues(r);t=yield e.next(),!t.done;)return t.value}catch(o){n={error:o}}finally{try{t&&!t.done&&(i=e.return)&&(yield i.call(e))}finally{if(n)throw n.error}}throw new Error("Expected a single value")})}var wr=class{constructor(){this.handlers=[],this.state=[]}value(e){this.newState({value:e,done:!1})}error(e){this.newState(e)}close(){this.newState({value:void 0,done:!0})}[Symbol.asyncIterator](){return this}next(){return new Promise((e,t)=>{this.newHandler([e,t])})}newState(e){let t=this.handlers.shift();if(typeof t=="undefined")return this.state.push(e);let n=this.state.shift();if(typeof n=="undefined")return this.consume(e,t);this.consume(n,t),this.newState(e)}newHandler(e){let t=this.state.shift();if(typeof t=="undefined")return this.handlers.push(e);let n=this.handlers.shift();if(typeof n=="undefined")return this.consume(t,e);this.consume(t,n),this.newHandler(e)}consume(e,[t,n]){e instanceof Error?n(e):t(e)}};m.AsyncIteratorHandler=wr});var rt=E(N=>{"use strict";Object.defineProperty(N,"__esModule",{value:!0});N.container=N.lazy=N.replace=void 0;function Tr(r,e,t){return Object.defineProperty(r,e,{value:t})}N.replace=Tr;function Pr(r,e,t){if(typeof t.get=="undefined")throw new Error("@lazy can only decorate getter methods");return Object.defineProperty(r,e,Object.assign(Object.assign({},t),{get(){return Tr(this,e,t.get.call(this))[e]}}))}N.lazy=Pr;function ci(r){return Object.keys(r).reduce((e,t)=>Pr(e,t,{configurable:!0,get:()=>r[t](e)}),{})}N.container=ci});var Rr=E(ke=>{"use strict";Object.defineProperty(ke,"__esModule",{value:!0});ke.AVLTree=void 0;var Sr=se(),Oe=Z(),Ar=rt(),M=class{constructor(e){this.comparator=e}static empty(e=Oe.ascending){return new Or(e)}static create(e,t,n=Oe.ascending){let i=M.empty(n);return new k(n,e,t,i,i)}static of(e,t=Oe.ascending){return M.preSorted(e.sort(Oe.by(0)),t,M.empty(t))}static preSorted(e,t,n){let i=e.length;switch(i){case 0:return n;case 1:{let[[o,a]]=e;return new k(t,o,a,n,n)}default:{let o=Math.floor(i/2),a=M.preSorted(e.slice(0,o),t,n),s=M.preSorted(e.slice(o+1),t,n),[c,l]=e[o];return new k(t,c,l,a,s)}}}};ke.AVLTree=M;var Or=class extends M{constructor(e){super(e);this.isEmpty=!0,this.height=0,this.balance=0}insert(e,t){return new k(this.comparator,e,t,this,this)}contains(e){return!1}lookup(e){}delete(e){return{tree:this}}first(){}last(){}removeFirst(){return{tree:this}}removeLast(){return{tree:this}}toString(){return""}*keys(){}*values(){}*entries(){return[]}},k=class extends M{constructor(e,t,n,i,o){super(e);this.key=t,this.value=n,this.left=i,this.right=o,this.isEmpty=!1}insert(e,t){let n=this.comparator(e,this.key);return n===0?new k(this.comparator,e,t,this.left,this.right):n<0?this.replaceLeft(this.left.insert(e,t)):this.replaceRight(this.right.insert(e,t))}contains(e){let t=this.comparator(e,this.key);return t===0?!0:t<0?this.left.contains(e):this.right.contains(e)}lookup(e){let t=this.comparator(e,this.key);return t===0?this.value:t<0?this.left.lookup(e):this.right.lookup(e)}delete(e){let t=this.comparator(e,this.key);if(t===0){if(this.left.isEmpty)return{tree:this.right,key:this.key,value:this.value};if(this.right.isEmpty)return{tree:this.left,key:this.key,value:this.value};let{tree:a,key:s,value:c}=this.left.removeLast();return{tree:nt(new k(this.comparator,s,c,a,this.right)),key:this.key,value:this.value}}if(t<0){let{tree:a,key:s,value:c}=this.left.delete(e);return{tree:this.replaceLeft(a),key:s,value:c}}let{tree:n,key:i,value:o}=this.right.delete(e);return{tree:this.replaceRight(n),key:i,value:o}}first(){return this.left.isEmpty?this.value:this.left.first()}last(){return this.right.isEmpty?this.value:this.right.last()}removeFirst(){if(this.left.isEmpty)return{tree:this.right,key:this.key,value:this.value};let{tree:e,key:t,value:n}=this.left.removeFirst();return{tree:this.replaceLeft(e),key:t,value:n}}removeLast(){if(this.right.isEmpty)return{tree:this.left,key:this.key,value:this.value};let{tree:e,key:t,value:n}=this.right.removeLast();return{tree:this.replaceRight(e),key:t,value:n}}replaceLeft(e){return nt(new k(this.comparator,this.key,this.value,e,this.right))}replaceRight(e){return nt(new k(this.comparator,this.key,this.value,this.left,e))}toString(){return`(${this.left} ${this.key}=${this.value} ${this.right})`}get balance(){return this.left.height-this.right.height}get height(){return Math.max(this.left.height,this.right.height)+1}*keys(){yield*this.left.keys(),yield this.key,yield*this.right.keys()}*values(){yield*this.left.values(),yield this.value,yield*this.right.values()}*entries(){yield*this.left.entries(),yield[this.key,this.value],yield*this.right.entries()}};Sr.__decorate([Ar.lazy],k.prototype,"balance",null);Sr.__decorate([Ar.lazy],k.prototype,"height",null);function nt(r){let e=r.balance;return e==-2?di(r):e==2?ui(r):r}function ui(r){let e=r.left.balance;return e==-1?li(r):e==1?kr(r):r}function di(r){let e=r.right.balance;return e==1?pi(r):e==-1?_r(r):r}function kr(r){return Ir(r)}function li(r){let e=Cr(r.left);return kr(r.replaceLeft(e))}function _r(r){return Cr(r)}function pi(r){let e=Ir(r.right);return _r(r.replaceRight(e))}function Cr(r){let e=r.right,t=e.left,n=r.replaceRight(t);return e.replaceLeft(n)}function Ir(r){let e=r.left,t=e.right,n=r.replaceLeft(t);return e.replaceRight(n)}});var Pe=E(d=>{"use strict";Object.defineProperty(d,"__esModule",{value:!0});d.WindowedTransducer=d.windowed=d.unique=d.UniqueTransducer=d.dedupe=d.DedupTransducer=d.sort=d.SortTransducer=d.takeWhile=d.TakeWhileTransducer=d.dropWhile=d.DropWhileTransducer=d.drop=d.DropTransducer=d.take=d.TakeTransducer=d.reduce=d.scan=d.ScanTransducer=d.decompose=d.compose=d.CompositeTransducer=d.find=d.reject=d.filter=d.FilterTransducer=d.flatMap=d.FlatMapTransducer=d.zipWithIndex=d.zip=d.ZipTransducer=d.map=d.MapTransducer=d.last=d.LastTransducer=d.first=d.FirstTransducer=d.transducer=d.identity=d.IdentityTransducer=void 0;var u=se(),K=Z(),Mr=Rr(),fi=et(),it=class{async_(e){return e}sync(e){return e}};d.IdentityTransducer=it;function Dr(){return new it}d.identity=Dr;d.transducer=Dr;var ot=class{async_(e){return u.__asyncGenerator(this,arguments,function*(){var n,i;try{for(var o=u.__asyncValues(e),a;a=yield u.__await(o.next()),!a.done;){let s=a.value;return yield u.__await(yield yield u.__await(s))}}catch(s){n={error:s}}finally{try{a&&!a.done&&(i=o.return)&&(yield u.__await(i.call(o)))}finally{if(n)throw n.error}}})}*sync(e){for(let t of e)return yield t}};d.FirstTransducer=ot;function jr(){return new ot}d.first=jr;var at=class{async_(e){return u.__asyncGenerator(this,arguments,function*(){var n,i;let o;try{for(var a=u.__asyncValues(e),s;s=yield u.__await(a.next()),!s.done;)o=s.value}catch(c){n={error:c}}finally{try{s&&!s.done&&(i=a.return)&&(yield u.__await(i.call(a)))}finally{if(n)throw n.error}}o!==void 0&&(yield yield u.__await(o))})}*sync(e){let t;for(t of e);t!==void 0&&(yield t)}};d.LastTransducer=at;function Lr(){return new at}d.last=Lr;var st=class{constructor(e){this.mapper=e}async_(e){return u.__asyncGenerator(this,arguments,function*(){var n,i;try{for(var o=u.__asyncValues(e),a;a=yield u.__await(o.next()),!a.done;){let s=a.value;yield yield u.__await(this.mapper(s))}}catch(s){n={error:s}}finally{try{a&&!a.done&&(i=o.return)&&(yield u.__await(i.call(o)))}finally{if(n)throw n.error}}})}*sync(e){for(let t of e)yield this.mapper(t)}};d.MapTransducer=st;function gi(r){return new st(r)}d.map=gi;var _e=class{constructor(e){this.other=e}async_(e){return u.__asyncGenerator(this,arguments,function*(){if(!K.isAsyncIterable(this.other))throw new Error("Unsupported operation exception");let n=e[Symbol.asyncIterator](),i=this.other[Symbol.asyncIterator]();for(;;){let[o,a]=yield u.__await(Promise.all([n.next(),i.next()]));if(o.done||a.done)return yield u.__await(void 0);yield yield u.__await([o.value,a.value])}})}*sync(e){if(!K.isIterable(this.other))throw new Error("Unsupported operation exception");let t=e[Symbol.iterator](),n=this.other[Symbol.iterator]();for(;;){let i=t.next(),o=n.next();if(i.done||o.done)return;yield[i.value,o.value]}}};d.ZipTransducer=_e;function yi(r){return new _e(r)}d.zip=yi;function mi(){return new _e(fi.range(0))}d.zipWithIndex=mi;var ct=class{constructor(e){this.mapper=e}async_(e){return u.__asyncGenerator(this,arguments,function*(){var n,i;try{for(var o=u.__asyncValues(e),a;a=yield u.__await(o.next()),!a.done;){let s=a.value;yield u.__await(yield*u.__asyncDelegator(u.__asyncValues(this.mapper(s))))}}catch(s){n={error:s}}finally{try{a&&!a.done&&(i=o.return)&&(yield u.__await(i.call(o)))}finally{if(n)throw n.error}}})}*sync(e){for(let t of e)yield*this.mapper(t)}};d.FlatMapTransducer=ct;function hi(r){return new ct(r)}d.flatMap=hi;var Ce=class{constructor(e){this.predicate=e}async_(e){return u.__asyncGenerator(this,arguments,function*(){var n,i;try{for(var o=u.__asyncValues(e),a;a=yield u.__await(o.next()),!a.done;){let s=a.value;this.predicate(s)&&(yield yield u.__await(s))}}catch(s){n={error:s}}finally{try{a&&!a.done&&(i=o.return)&&(yield u.__await(i.call(o)))}finally{if(n)throw n.error}}})}*sync(e){for(let t of e)this.predicate(t)&&(yield t)}};d.FilterTransducer=Ce;function Er(r){return new Ce(r)}d.filter=Er;function bi(r){return new Ce(e=>!r(e))}d.reject=bi;function xi(r){return ut(Er(r),jr())}d.find=xi;var Ie=class{constructor(e,t){this.a=e,this.b=t}async_(e){return this.b.async_(this.a.async_(e))}sync(e){return this.b.sync(this.a.sync(e))}};d.CompositeTransducer=Ie;function ut(r,e){return new Ie(r,e)}d.compose=ut;function*dt(r){r instanceof Ie?(yield*dt(r.a),yield*dt(r.b)):yield r}d.decompose=dt;var lt=class{constructor(e,t){this.reducer=e,this.seed=t}async_(e){return u.__asyncGenerator(this,arguments,function*(){var n,i;let o=this.seed;yield yield u.__await(o);try{for(var a=u.__asyncValues(e),s;s=yield u.__await(a.next()),!s.done;){let c=s.value;yield yield u.__await(o=this.reducer(o,c))}}catch(c){n={error:c}}finally{try{s&&!s.done&&(i=a.return)&&(yield u.__await(i.call(a)))}finally{if(n)throw n.error}}})}*sync(e){let t=this.seed;yield t;for(let n of e)yield t=this.reducer(t,n)}};d.ScanTransducer=lt;function Hr(r,e){return new lt(r,e)}d.scan=Hr;function vi(r,e){return ut(Hr(r,e),Lr())}d.reduce=vi;var pt=class{constructor(e){if(this.count=e,typeof e=="undefined")throw new Error("Count can not be undefined")}async_(e){return u.__asyncGenerator(this,arguments,function*(){var n,i;if(this.count<1)return yield u.__await(void 0);try{for(var o=u.__asyncValues(e),a;a=yield u.__await(o.next()),!a.done;){let s=a.value;if(yield yield u.__await(s),--this.count<1)return yield u.__await(void 0)}}catch(s){n={error:s}}finally{try{a&&!a.done&&(i=o.return)&&(yield u.__await(i.call(o)))}finally{if(n)throw n.error}}})}*sync(e){if(!(this.count<1)){for(let t of e)if(yield t,--this.count<1)return}}};d.TakeTransducer=pt;function wi(r){return new pt(r)}d.take=wi;var ft=class{constructor(e){if(this.count=e,typeof e=="undefined")throw new Error("Count can not be undefined")}async_(e){return u.__asyncGenerator(this,arguments,function*(){var n,i;try{for(var o=u.__asyncValues(e),a;a=yield u.__await(o.next()),!a.done;){let s=a.value;--this.count<0&&(yield yield u.__await(s))}}catch(s){n={error:s}}finally{try{a&&!a.done&&(i=o.return)&&(yield u.__await(i.call(o)))}finally{if(n)throw n.error}}})}*sync(e){for(let t of e)--this.count<0&&(yield t)}};d.DropTransducer=ft;function Ti(r){return new ft(r)}d.drop=Ti;var gt=class{constructor(e){this.predicate=e}async_(e){return u.__asyncGenerator(this,arguments,function*(){var n,i;let o=!0;try{for(var a=u.__asyncValues(e),s;s=yield u.__await(a.next()),!s.done;){let c=s.value;o&&(o=this.predicate(c)),o||(yield yield u.__await(c))}}catch(c){n={error:c}}finally{try{s&&!s.done&&(i=a.return)&&(yield u.__await(i.call(a)))}finally{if(n)throw n.error}}})}*sync(e){let t=!0;for(let n of e)t&&(t=this.predicate(n)),t||(yield n)}};d.DropWhileTransducer=gt;function Pi(r){return new gt(r)}d.dropWhile=Pi;var yt=class{constructor(e){this.predicate=e}async_(e){return u.__asyncGenerator(this,arguments,function*(){var n,i;try{for(var o=u.__asyncValues(e),a;a=yield u.__await(o.next()),!a.done;){let s=a.value;if(this.predicate(s))yield yield u.__await(s);else return yield u.__await(void 0)}}catch(s){n={error:s}}finally{try{a&&!a.done&&(i=o.return)&&(yield u.__await(i.call(o)))}finally{if(n)throw n.error}}})}*sync(e){for(let t of e)if(this.predicate(t))yield t;else return}};d.TakeWhileTransducer=yt;function Si(r){return new yt(r)}d.takeWhile=Si;var mt=class{constructor(e){this.comparator=e}async_(e){return u.__asyncGenerator(this,arguments,function*(){let n=yield u.__await(K.array(e));n.sort(this.comparator),yield u.__await(yield*u.__asyncDelegator(u.__asyncValues(n)))})}*sync(e){let t=K.array(e);t.sort(this.comparator),yield*t}};d.SortTransducer=mt;function Ai(r=K.ascending){return new mt(r)}d.sort=Ai;var ht=class{constructor(e){this.comparator=e}async_(e){return u.__asyncGenerator(this,arguments,function*(){var n,i;let o;try{for(var a=u.__asyncValues(e),s;s=yield u.__await(a.next()),!s.done;){let c=s.value;typeof o=="undefined"?yield yield u.__await(c):this.comparator(c,o)!==0&&(yield yield u.__await(c)),o=c}}catch(c){n={error:c}}finally{try{s&&!s.done&&(i=a.return)&&(yield u.__await(i.call(a)))}finally{if(n)throw n.error}}})}*sync(e){let t;for(let n of e)typeof t=="undefined"?yield n:this.comparator(n,t)!==0&&(yield n),t=n}};d.DedupTransducer=ht;function Oi(r=K.ascending){return new ht(r)}d.dedupe=Oi;var bt=class{constructor(e){this.comparator=e}async_(e){return u.__asyncGenerator(this,arguments,function*(){var n,i;let o=Mr.AVLTree.empty(this.comparator);try{for(var a=u.__asyncValues(e),s;s=yield u.__await(a.next()),!s.done;){let c=s.value;o.contains(c)||(o=o.insert(c,void 0),yield yield u.__await(c))}}catch(c){n={error:c}}finally{try{s&&!s.done&&(i=a.return)&&(yield u.__await(i.call(a)))}finally{if(n)throw n.error}}})}*sync(e){let t=Mr.AVLTree.empty(this.comparator);for(let n of e)t.contains(n)||(t=t.insert(n,void 0),yield n)}};d.UniqueTransducer=bt;function ki(r=K.ascending){return new bt(r)}d.unique=ki;function _i(r,e=1,t=!1){return new xt(r,e,t)}d.windowed=_i;var xt=class{constructor(e,t,n){this.size=e,this.step=t,this.remainder=n}async_(e){return u.__asyncGenerator(this,arguments,function*(){var n,i;let o=[],a=0;try{for(var s=u.__asyncValues(e),c;c=yield u.__await(s.next()),!c.done;){let l=c.value;if(a>0){a--;continue}o.push(l),o.length===this.size&&(yield yield u.__await([...o]),o=o.slice(this.step),this.step>this.size&&(a=this.step-this.size))}}catch(l){n={error:l}}finally{try{c&&!c.done&&(i=s.return)&&(yield u.__await(i.call(s)))}finally{if(n)throw n.error}}this.remainder&&(yield yield u.__await([...o]))})}*sync(e){let t=[],n=0;for(let i of e){if(n>0){n--;continue}t.push(i),t.length===this.size&&(yield[...t],t=t.slice(this.step),this.step>this.size&&(n=this.step-this.size))}this.remainder&&(yield[...t])}};d.WindowedTransducer=xt});var Tt=E(Q=>{"use strict";Object.defineProperty(Q,"__esModule",{value:!0});Q.caching=Q.cache=void 0;function Ci(r,e,t){if(typeof t.value!="function")throw new Error("@cache can only decorate methods");let n=new WeakMap;function i(o){let a=n.get(o);if(a)return a;let s=new Map;return n.set(o,s),s}return Object.defineProperty(r,e,Object.assign(Object.assign({},t),{value:function(...o){let a=JSON.stringify(o),s=i(this),c=s.get(a);if(typeof c!="undefined"||s.has(a))return c;let l=t.value.call(this,...o);return s.set(a,l),l}}))}Q.cache=Ci;function Ii(r){let e=new Map;return function(...t){let n=JSON.stringify(t),i=e.get(n);if(typeof i!="undefined"||e.has(n))return i;let o=r(...t);return e.set(n,o),o}}Q.caching=Ii});var bn=E(g=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});g.Uri=g.HostHandler=g.host=g.replace=g.const_=g.modify=g.notFound=g.ok=g.response=g.delete_=g.patch=g.put=g.post=g.get=g.request=g.stringChunk=g.StringBody=g.isBody=void 0;var fn=se();typeof Symbol.asyncIterator=="undefined"&&(Symbol.asyncIterator=Symbol.for("Symbol.asyncIterator"));function Xi(r){return typeof r=="object"&&"text"in r&&Symbol.asyncIterator in r}g.isBody=Xi;var Ne=class{constructor(e){this.value=e}text(){return Promise.resolve(this.value)}[Symbol.asyncIterator](){return fn.__asyncGenerator(this,arguments,function*(){yield yield fn.__await(gn(this.value))})}};g.StringBody=Ne;function gn(r){return{text:()=>r,data:()=>new TextEncoder().encode(r)}}g.stringChunk=gn;function ee(r,e,t,n){return{method:r,uri:typeof e=="string"?new te(e):e,headers:t||{},body:typeof n=="string"?new Ne(n):n}}g.request=ee;function Yi(r,e){return ee("GET",r,e)}g.get=Yi;function eo(r,e,t){return ee("POST",r,e,t)}g.post=eo;function to(r,e,t){return ee("PUT",r,e,t)}g.put=to;function ro(r,e,t){return ee("PATCH",r,e,t)}g.patch=ro;function no(r,e){return ee("DELETE",r,e)}g.delete_=no;function Lt(r,e,t){return{status:r,headers:e||{},body:typeof t=="string"?new Ne(t):t}}g.response=Lt;function io(r,e){return Lt(200,r,e)}g.ok=io;function oo(r,e){return Lt(404,r,e)}g.notFound=oo;function Et(r,e,t){return Object.assign({},r,{[e]:t(r[e])})}g.modify=Et;function yn(r){return()=>r}g.const_=yn;function mn(r,e){return t=>Et(t,r,yn(e))}g.replace=mn;function ao(r){if(typeof r.uri.authority!="undefined")return r.uri.authority;let e=r.headers.Host;if(typeof e!="string")throw new Error("Bad Request");return e}g.host=ao;var hn=class{constructor(e,t){this.handler=e,this.host=t}handle(e){return this.handler.handle(Et(e,"headers",mn("Host",this.host)))}};g.HostHandler=hn;var te=class{constructor(e){let t=te.RFC_3986.exec(e);if(!t)throw new Error(`Invalid Uri: ${e}`);let[,,n,,i,o,,a,,s]=t;this.scheme=n,this.authority=i,this.path=o,this.query=a,this.fragment=s}toString(){let e=[];return typeof this.scheme!="undefined"&&e.push(this.scheme,":"),typeof this.authority!="undefined"&&e.push("//",this.authority),e.push(this.path),typeof this.query!="undefined"&&e.push("?",this.query),typeof this.fragment!="undefined"&&e.push("#",this.fragment),e.join("")}toJSON(){return this.toString()}};g.Uri=te;te.RFC_3986=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/});var qr=H(Pe()),vt=H(Z());function wt(r){switch(typeof r){case"undefined":return!0;case"string":return r.trim()==="";case"number":return isNaN(r);case"object":{if(r==null)return!0;if(b.isObject(r))return Object.keys(r).length===0;if(Array.isArray(r))return r.length===0}}return!1}var D=class{static noWhitespace(e){return e&&typeof e=="string"?e.replace(/\s+/g,""):""}static startWith(e,t){return e?e.substring(0,t.length)===t:e===t}static endsWith(e,t){return e.substring(e.length-t.length,e.length)===t}static isEmpty(e){return e===void 0||e===null?!0:e.trim().length===0}static isLowerCase(e){return e===e.toLowerCase()&&e!==e.toUpperCase()}static isUpperCase(e){return e===e.toUpperCase()&&e!==e.toLowerCase()}static kebabCase(e){return D.delimiterCase(e,"-")}static snakeCase(e){return D.delimiterCase(e,"_")}static delimiterCase(e,t){return e.replace(/([A-Z][a-z]+|\d+)/gm,`${t}$1`).replace(new RegExp(`^${t}`),"").toLowerCase()}static titleCase(e){return D.isEmpty(e)?"":e.replace(/\w\S*/g,t=>t.charAt(0).toUpperCase()+t.substr(1).toLowerCase())}static camelCase(e){return D.isEmpty(e)?"":e.replace(/([A-Za-z]+|\d+)/gm,t=>t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()).replace(new RegExp("^."),t=>t.toLowerCase()).replace(new RegExp(/[_\-\s]/g),"")}};function ce(r,e,t){if(e(r))return t(r);switch(typeof r){case"undefined":return;case"object":{if(r===null)return null;if(Array.isArray(r))return r.map(n=>ce(n,e,t));if(b.isObject(r))return b.keys(r).sort().reduce((n,i)=>{let o=r[i];return n[i]=ce(o,e,t),n},{})}}return r}function Re(r,e){switch(typeof r){case"undefined":return;case"object":{if(r===null)return null;if(Array.isArray(r))return r.map(t=>Re(t,e));if(b.isObject(r))return b.keys(r).sort().reduce((t,n)=>{let i=r[n];return t[e(String(n))]=Re(i,e),t},{})}}return r}var b=class{static isObject(e){return e&&typeof e=="object"&&(e.constructor===Object||/Object.*native/.test(e.constructor.toString()))}static keys(e){return Object.keys(e)}static values(e){return Object.keys(e).map(t=>e[t])}static entries(e){return Object.keys(e).map(t=>[t,e[t]])}static removeEmpty(e){return e&&(b.isObject(e)?Object.keys(e).reduce((t,n)=>{let i=b.removeEmpty(e[n]);return wt(i)||(t[n]=i),t},{}):e)}static sort(e){return e&&(Array.isArray(e)?e.map(b.sort):b.isObject(e)?Object.keys(e).sort().reduce((t,n)=>{let i=e[n];return t[n]=b.sort(i),t},{}):e)}static toLowerCase(e){return typeof e=="string"?e.toLowerCase():Array.isArray(e)?e.map(b.toLowerCase):p(()=>b.isObject(e))?Object.entries(e).reduce((t,[n,i])=>(t[n]=b.toLowerCase(i),t),{}):e}static snakeCase(e){return Re(e,D.snakeCase)}static camelCase(e){return Re(e,D.camelCase)}static filter(e,t){let n=b.keys(e).filter(t);return b.pick(e,...n)}static omit(e,...t){return t.reduce((n,i)=>(Reflect.deleteProperty(n,i),n),e)}static pick(e,...t){return t.reduce((n,i)=>(n[i]=e[i],n),{})}};var F=class{static from(e){return Array.from(e)}static find(e,t){if(e.find)return e.find(t);let[n]=e.filter(t);return n}static findLastIndex(e,t){let n=[...e].reverse().findIndex(t);return n===-1?n:e.length-n-1}static toObject(e){return e.reduce((t,n)=>(Object.keys(n).forEach(i=>{i in t||(t[i]=n[i])}),t),{})}static flatten(e){return e.reduce((t,n)=>t.concat(n),[])}static flatMap(e,t){return e.flatMap?e.flatMap(t):F.flatten(e.map(t))}static unique(e){return Array.from(new Set(e))}static clean(e){return e.filter(Boolean)}static trim(e){return e.map(t=>t.trim())}static includes(e,t){return"includes"in e?e.includes(t):e.indexOf(t)!==-1}static first(e){return e[0]}static last(e){return e[e.length-1]}static safeReverse(e){return e?e.slice().reverse():[]}static shuffle(e){return e.map(t=>({value:t,order:Math.random()})).sort((0,vt.by)("order")).map(({value:t})=>t)}};function p(r,e=void 0){try{let t=r();return typeof t=="undefined"?e:t}catch(t){return e}}var C=(()=>typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof module!="undefined"?module:Function("return this")())();function Nr(r,e,t){let n=r[e];return typeof n=="undefined"?r[e]=t:Array.isArray(n)?n.indexOf(t)==-1&&n.push(t):r[e]=[n,t],r}function Fr(r,e,t,n=i=>i){let i=[],o=0,a;for(;(a=r.exec(e))!=null;)i.push(n(e.substring(o,a.index))),i.push(t(a)),o=r.lastIndex;return i.push(n(e.substring(o))),i.join("")}var Wr=H(Tt()),Gr=H(rt());function U(r=C){return r.triptease=r.triptease||{},r.triptease.onboard=r.triptease.onboard||{},{triptease:r.triptease,onboard:r.triptease.onboard}}var B;(function(n){n.Native="native",n.NonNative="non-native",n.NotImplemented="not-implemented"})(B||(B={}));function Kr(r,e){return p(()=>e.split(".").reduce((t,n)=>t[n],r))}function Ri(r){return r==null?B.NotImplemented:typeof r=="function"?r.toString().includes("native code")?B.Native:B.NonNative:B.Native}var Me=class{static exposeApi(){let e=U(C).triptease;e.native||(e.native=Me)}static getProperty(e){let t=Kr(C,e);return Ri(t)!==B.NonNative?t:Kr(Me.window,e)}static get window(){let e=C;if(!e.document)return e;try{let t=e.document,n=t.querySelector("[name='triptease.native']");if(n)return n.contentWindow;let i=t.createElement("iframe");return i.style.display="none",i.setAttribute("title","blank"),i.setAttribute("aria-hidden","true"),i.setAttribute("name","triptease.native"),t.documentElement.appendChild(i),i.contentWindow}catch(t){return e}}},A=Me;ae([Wr.cache],A,"getProperty",1),ae([Gr.lazy],A,"window",1);var Mi=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}\.\d{3}Z)?$/;function Di(r){return ce(r,e=>typeof e=="string"&&Mi.test(e),e=>{let t=new Date(e);return isNaN(t.valueOf())?e:t})}var ji=A.getProperty("JSON.parse"),Li=A.getProperty("JSON.stringify"),Ei=A.getProperty("Date.prototype.toISOString"),j=class{static parse(e){return ji(e)}static parseWithDates(e){return Di(j.parse(e))}static stringify(e){return Li(this.clean(e))}static clean(e){return ce(e,t=>{let n=typeof t;switch(n){case"undefined":case"string":case"number":case"boolean":return!0;case"object":{if(t===null)return!0;if(Array.isArray(t)||b.isObject(t))return!1;if("toJSON"in t)return!0}}throw new Error(`Illegal JsonValue: ${n} ${t} `)},t=>t instanceof Date?Ei.call(t):t)}},_=class{static same(e,t){return j.stringify(e)===j.stringify(t)}static isSuperset(e,t){return e===null||t===null?_.same(e,t):Array.isArray(e)&&Array.isArray(t)?e.length>t.length?!1:e.every(n=>t.some(i=>_.isSuperset(n,i))):p(()=>b.isObject(e))&&p(()=>b.isObject(t))?Object.keys(e).reduce((n,i)=>n&&_.isSuperset(e[i],t[i]),!0):_.same(e,t)}static compress(e){let t=_.groupValues(e);return this.compressGrouped(t)}static compressGrouped(e){return Object.entries(e).reduce(({shared:t,unique:n},[i,o])=>{if(p(()=>b.isObject(o))){let a=_.compressGrouped(o);Object.keys(a.shared).length>0&&(t[i]=a.shared),a.unique.forEach((s,c)=>{n[c]=n[c]||{},Object.keys(s).length>0&&(n[c][i]=s)})}return Array.isArray(o)&&o.forEach((a,s)=>{n[s]=n[s]||{},F.unique(o.map(c=>j.stringify(c))).length===1?t[i]=a:a!==void 0&&(n[s][i]=a)}),{shared:t,unique:n}},{shared:{},unique:[]})}static groupValues(e){let t=Array.from(e.reduce((a,s)=>Object.keys(s).reduce((c,l)=>c.add(l),a),new Set)),[n,i]=e.reduce((a,s)=>t.reduce(([c,l],h)=>{let P=s[h];return p(()=>b.isObject(P))?(l[h]=l[h]||[],l[h].push(P)):(c[h]=c[h]||[],c[h].push(P)),[c,l]},a),[{},{}]),o=Object.entries(i).reduce((a,[s,c])=>(a[s]=_.groupValues(c),a),{});return O(O({},n),o)}static decompress(e){return e.unique.map(t=>this.merge(e.shared,t))}static merge(e,t){return[...Object.keys(e),...Object.keys(t)].reduce((i,o)=>{let a=e[o],s=t[o];return p(()=>b.isObject(a))&&p(()=>b.isObject(s))?i[o]=_.merge(a,s):i[o]=s!=null?s:a,i},{})}};function ue(r,e=!0){return r?(r.indexOf("?")==0&&(r=r.substring(1,r.length)),r.split("&").map(function(t){return t.split("=")}).reduce(function(t,n){let i=n[0],o=n[1];if(!i)return t;let a=Ur(o),s=e?Hi(a):a;return Nr(t,Ur(i),s)},{})):{}}function Ur(r){return p(()=>decodeURIComponent(r.replace(/\+/g,"%20")),r)}function Hi(r){try{return j.parse(r)}catch(e){return r}}function qi(r){return typeof r=="string"?r:JSON.stringify(r)}function Br(r,e=!0){return Object.keys(b.removeEmpty(r)).map(t=>{let n=r[t],i=e?qi(n):n;return`${t}=${encodeURIComponent(i)}`}).join("&")}var St=class{constructor(e){let t=St.RFC_3986.exec(e);if(!t)throw new Error(`Invalid Uri: ${e}`);let[,,n,,i,o,,a,,s]=t;this.scheme=n,this.authority=i?new Pt(i):void 0,this.path=o,this.query=a,this.fragment=s}toString(){let e=[];return typeof this.scheme!="undefined"&&e.push(this.scheme,":"),typeof this.authority!="undefined"&&e.push("//",this.authority.toString()),e.push(this.path),typeof this.query!="undefined"&&e.push("?",this.query),typeof this.fragment!="undefined"&&e.push("#",this.fragment),e.join("")}get host(){return this.authority&&this.authority.host}get port(){return this.authority&&this.authority.port}get userInfo(){return this.authority&&this.authority.userInfo}},X=St;X.RFC_3986=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;var At=class{constructor(e){let t=At.RFC_3986.exec(e);if(!t)throw new Error(`Invalid Authority: ${e}`);let[,n,i,o]=t;this.userInfo=n,this.host=i,this.port=o}toString(){let e=[];return typeof this.userInfo!="undefined"&&e.push(this.userInfo,"@"),typeof this.host!="undefined"&&e.push(this.host),typeof this.port!="undefined"&&e.push(":",this.port),e.join("")}},Pt=At;Pt.RFC_3986=/(?:([^@]+)@)?([^:]+)(?::([\d]+))?/;var Vr=A.getProperty("console.log"),Ni=A.getProperty("console.error"),Fi=A.getProperty("console.debug"),$r=class{constructor(e=Vr,t=Ni,n=Fi||Vr){this.log=e;this.error=t;this.debug=n}},zr=class{constructor(){this.log=()=>{};this.error=()=>{};this.debug=()=>{}}},De="triptease-debug",Wi=256;function Jr(r,e=De){let t=p(()=>{var n;return ue((n=r.location)==null?void 0:n.search,!1)[e]})||p(()=>{var n;return ue(new X((n=r.location)==null?void 0:n.originalHref).query,!1)[e]})||p(()=>{var n,i;return(i=(n=r.process)==null?void 0:n.env)==null?void 0:i.DEBUG})||p(()=>{var n;return((n=r.localStorage)==null?void 0:n.getItem)&&r.localStorage.getItem(e)})||p(()=>{var n;return((n=r.sessionStorage)==null?void 0:n.getItem)&&r.sessionStorage.getItem(e)})||"";return p(()=>t.substring(0,Wi),"")}function Zr(r=C){let e=Jr(r,De);return D.isEmpty(e)?"":Br({[De]:e})}function Gi(r){return Jr(r,De).split(",").map(e=>e.trim())}function Qr(r){let e=r.replace(/\./g,"\\.").replace(/\*/g,".*");return new RegExp("^"+e+"$")}function Ki(r,e=C){try{let t=Gi(e),n=t.filter(i=>i[0]==="!").map(i=>i.substr(1));return n.length>0?!n.some(i=>Qr(i).test(r)):t.some(i=>i==="true"||Qr(i).test(r))}catch(t){return!1}}var Xr=class{constructor(e){this.name=e;this.console=new $r}debug(e,...t){this.console.debug(`[${this.name}] ${e}`,...t)}log(e,...t){this.console.log(`[${this.name}] ${e}`,...t)}error(e,...t){this.console.error(`[${this.name}] ${e}`,...t)}};function x(r,e=C){return Ki(r,e)?new Xr(r):new zr}var Vo=A.getProperty("Date");var Ot=class{now(){return new Date}};function Yr(r){return new Promise(e=>{this.setTimeout(()=>{e()},r)})}var de=class{constructor(e=new Ot){this.clock=e;this.delay=Yr.bind(this);this.delay=Yr}task(e){return f(this,null,function*(){return yield this.delay(0),e()})}setTimeout(e,t){return setTimeout(e,t)}clearTimeout(e){clearTimeout(e)}setInterval(e,t){return setInterval(e,t)}clearInterval(e){clearInterval(e)}requestIdleCallback(e,t){let n=t?t.timeout:1,i=this.clock.now().getTime()+n,o=this;return this.setTimeout(()=>{e({didTimeout:!1,timeRemaining(){return Math.max(0,50-(o.clock.now().getTime()-i))}})},n)}cancelIdleCallback(e){this.clearTimeout(e)}};var Zo=new de;function en(r={credentials:!1}){return e=>f(this,null,function*(){if(typeof fetch!="undefined"){let t=yield fetch(e.url,{method:e.method,headers:e.headers,body:e.body,credentials:r.credentials?"include":"omit"});return{status:t.status,statusDescription:t.statusText,body:yield t.text()}}else{let t=new XMLHttpRequest;return t.open(e.method,e.url,!0),e.headers&&Object.keys(e.headers).forEach(n=>{t.setRequestHeader(n,e.headers[n])}),t.withCredentials=r.credentials,t.send(e.body),new Promise((n,i)=>{t.addEventListener("load",o=>{n({status:t.status,statusDescription:t.statusText,body:t.responseText})}),t.addEventListener("error",o=>{i(o)})})}})}var rn=H(Tt());var Ui=/\${([^}]+)}/g;function tn(r,e){return Fr(Ui,r,([,t])=>{var n;return(n=e[t])!=null?n:`\${${t}}`})}var kt=class{static get(){return p(()=>{let e="6641.78397";return e?"v"+e:"latest"})}};var nn=class{constructor(e,t=en()){this.logger=e;this.httpHandler=t;this.workers={}}createWorker(e,t){return f(this,null,function*(){let n=this.workers[e];return n||(this.workers[e]=yield this.create(t,{name:e}))})}create(e,t){return f(this,null,function*(){try{return new Worker(e,t)}catch(n){this.logger.debug("Failed to create Worker switching to Blob Worker because:",n.message);let i=`location.originalHref = "${e}";
`,a=(yield this.httpHandler({method:"GET",url:e})).body,s=new Blob([i,a],{type:"application/javascript"});return new Worker(URL.createObjectURL(s),t)}})}},je=class{constructor(e,t=x("application-starter"),n=new nn(t),i=new on(e,t)){this.window=e;this.logging=t;this.workerFactory=n;this.waiter=i}start(e){return f(this,null,function*(){this.logging.debug(`ApplicationStarter starting app "${e.name}" (${e.type}), ${e.url}`);let t=this.window.document;if(e.type==="worker"){let o=yield this.workerFactory.createWorker(e.name,e.url);return e.startMessage&&(yield this.waiter.waitForMessage(e.startMessage,o)),this.logging.debug("ApplicationStarter returning worker"),o}let n=t.createElement(e.type);n.setAttribute("name",e.name),n.src=tn(e.url,{onboard_version:kt.get()});let i=je.DefaultOptions[e.type]||{};return Object.keys(i).forEach(o=>{n.setAttribute(o.toLowerCase(),i[o])}),this.addElement(n),e.startMessage?yield this.waiter.waitForMessage(e.startMessage):e.type==="script"&&(yield this.waiter.waitForLoadEvent(n)),n})}addElement(e){(this.window.document.body||this.window.document.documentElement).appendChild(e)}static create(e){var n;let t=U(e).triptease.onboard;return t.applicationStarter=(n=t.applicationStarter)!=null?n:new je(e)}},le=je;le.DefaultOptions={script:{defer:"",async:"",crossOrigin:"anonymous"},iframe:{style:"display: none;",sandbox:"allow-scripts allow-same-origin",title:"blank","aria-hidden":"true"}},ae([rn.cache],le.prototype,"start",1);var on=class{constructor(e,t){this.window=e;this.logging=t}waitForLoadEvent(e){return this.logging.debug("MessageWaiter waiting for load/error event for",e),new Promise((t,n)=>{e.addEventListener("load",t),e.addEventListener("error",i=>n({name:"ScriptError",message:i.message||`Failed to load script "${e.src}"`}))})}waitForMessage(e,t=this.window){return this.logging.debug("MessageWaiter waiting for message",e),new Promise(n=>{this.logging.debug("MessageWaiter creating handler");let i=o=>{try{let a=o.data&&o.data.type,s=a===e;this.logging.debug(`ApplicationStarter message received "${a}", expecting "${e}", matched: ${s}`),s&&(t.removeEventListener("message",i),n(o.data))}catch(a){this.logging.debug("ApplicationStarter error in parsing message",a,o)}};this.logging.debug("MessageWaiter adding listener"),t.addEventListener("message",i)})}};var ya=new Set(["Unknown","PossibleIdentifier"]),ma=new Set(["HotelName","HotelCode","ChainCode"]);var I;(function(l){l.Search="Search",l.RoomsAndRates="RoomsAndRates",l.Confirmation="Confirmation",l.Checkout="Checkout",l.Payment="Payment",l.Group="Group",l.Advert="Advert",l.Partial="Partial",l.Unknown="Unknown"})(I||(I={}));var Bi=[I.Payment,I.Confirmation,I.RoomsAndRates,I.Checkout,I.Search,I.Partial,I.Group,I.Unknown,I.Advert];function an(r){return Bi.indexOf(r)}var L;(function(n){n.Singleton="Singleton",n.ApplicationHost="ApplicationHost",n.DataSource="DataSource"})(L||(L={}));var pe="triptease.onboard.kernel";function Vi(r,e,t){return Object.defineProperty(r,e,{value:t})}function sn(r,e,t){return Vi(r,e,t)[e]}function cn(r){try{let{target:e,method:t}=Ct(r.type);if(e&&t)return!0}catch(e){}return!1}var Le=class{constructor(e,t=x("worker")){this.worker=e;this.logger=t}addListener(e){this.worker.addEventListener("message",t=>{!cn(t.data)||e(t.data,this)})}send(e){try{this.worker.postMessage(e)}catch(t){this.worker.postMessage(JSON.parse(JSON.stringify(e)))}}},Y=class{constructor(e,t,n=_t,i=x("messaging")){this.listener=e;this.target=t;this.allowedOrigins=n;this.logger=i}addListener(e){this.listener&&this.listener.addEventListener("message",t=>{this.disallowedOrigin(t)||!cn(t.data)||e(t.data,new Y(void 0,t.source||this.target))})}disallowedOrigin(e){return e.origin&&this.allowedOrigins.length>0&&this.allowedOrigins.indexOf(new X(e.origin).host)===-1}send(e){if(this.target)try{this.target.postMessage(e,"*")}catch(t){this.target.postMessage(JSON.parse(JSON.stringify(e)),"*")}}},_t=["onboard.triptease.io","localhost"],$i=/^(.*)\.([^.]+)$/;function Ct(r){let[,e,t]=r.match($i)||[];return{target:e,method:t}}function un(r){return r&&typeof r=="object"&&"name"in r&&typeof r.name=="string"&&"message"in r&&typeof r.message=="string"&&"stack"in r&&typeof r.stack=="string"}function It(r,e,t){return{name:r,message:e,stack:t!=null?t:""}}var xn=H(Pe());var G=H(Z());var Ee,zi=new Uint8Array(16);function Rt(){if(!Ee&&(Ee=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Ee))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ee(zi)}var dn=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Ji(r){return typeof r=="string"&&dn.test(r)}var ln=Ji;var v=[];for(He=0;He<256;++He)v.push((He+256).toString(16).substr(1));var He;function Zi(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(v[r[e+0]]+v[r[e+1]]+v[r[e+2]]+v[r[e+3]]+"-"+v[r[e+4]]+v[r[e+5]]+"-"+v[r[e+6]]+v[r[e+7]]+"-"+v[r[e+8]]+v[r[e+9]]+"-"+v[r[e+10]]+v[r[e+11]]+v[r[e+12]]+v[r[e+13]]+v[r[e+14]]+v[r[e+15]]).toLowerCase();if(!ln(t))throw TypeError("Stringified UUID is invalid");return t}var pn=Zi;function Qi(r,e,t){r=r||{};var n=r.random||(r.rng||Rt)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){t=t||0;for(var i=0;i<16;++i)e[t+i]=n[i];return e}return pn(n)}var Mt=Qi;var Dt=()=>p(()=>crypto.randomUUID())||Mt(),jt=class{generate(e){if(typeof e!="undefined")throw new Error("UuidGenerator does not support custom lengths");return Dt().replace(/-/g,"")}};var V=class{static get last(){return O({},V.value)}static get(e,t,n,i,o){let a={clientKey:n,clientName:i,apiKey:o,pageType:e,pagePath:t};if(!wt(V.value)&&p(()=>{let c=O({},V.value);return delete c.pageVisitId,_.same(c,a)}))return V.value;let s=oe(O({},a),{pageVisitId:Dt()});return V.value=s}},W=V;W.value={};function qe(r,e=W.last){let i=e,{pageVisitId:t}=i,n=Xt(i,["pageVisitId"]);return oe(O({},r),{context:O(O({},n),r.context||{}),pageVisitId:t})}var vn=H(bn());function*wn(r){for(let e=0;e<r.frames.length;e++){let t=r.frames[e];yield t,yield*wn(t)}}function so(r,e){return(0,G.array)(wn(r),(0,xn.filter)(t=>p(()=>t.name)===e))}function Tn(r){return r===r.top?0:1+Tn(r.parent)}function Ht(r){let[e]=r.sort((0,G.by)(Tn,G.ascending));return e}function co(r){return r.map(e=>p(()=>{var t;return(t=e.triptease.message)==null?void 0:t.payload})).filter(Boolean)}function uo(r){let[e]=co(r).sort((0,G.by)(t=>an(t.type),G.ascending));return e}function qt(r){return so(r.top,pe)}function Pn(r,e=qt(r)){return e.length===1?L.Singleton:Ht(e)===r?L.ApplicationHost:L.DataSource}function Nt(r){return p(()=>{var e;return new vn.Uri((e=r.context.page)==null?void 0:e.url).path})}function Sn(r,e){let t=uo(r);return qe(oe(O({},e),{payload:t}),W.get(t.type,Nt(e),t.clientKey,t.clientName,t.apiKey))}var Ft="triptease.onboard.request",Fe="triptease.onboard.response";function Wt(r){return r&&typeof r=="object"&&r.type==="triptease.onboard.request"&&typeof r.requestType=="string"&&typeof r.correlationId=="string"&&Array.isArray(r.payload)}function We(r){return r&&typeof r=="object"&&r.type==="triptease.onboard.response"&&typeof r.correlationId=="string"}function Ge(r,e){return{type:"triptease.onboard.response",correlationId:r,payload:e}}function Ke(r,e){return Ge(r,It("NotFound","No handler found for "+e))}function An(r){return p(()=>r.payload.name==="NotFound",!1)}function On(r,e){return Ge(r,It(e.name,e.message,e.stack))}var lo=x("messaging"),Ue=class{constructor(){this.handlers=new Map}register(e,t){return e.forEach(n=>{if(this.hasHandlerFor(n))throw new Error(`Method name "${n}" already registered to a handler`);this.handlers.set(n,t)}),this}handle(e){return f(this,null,function*(){let t=this.handlers.get(e.requestType);return t?(lo.debug("Matched message to handler",e,t),yield t.handle(e)):Ke(e.correlationId,e.requestType)})}hasHandlerFor(e){return this.handlers.has(e)}};var Gt=x("messaging"),fe=class{constructor(e){this.target=e}handle(e){return f(this,null,function*(){let t=this.target[e.requestType];if(!t)return Gt.debug("No method found that matches method",e.requestType,this.target),Ke(e.correlationId,e.requestType);try{Gt.debug("Found method",e.requestType);let n=yield t.apply(this.target,e.payload);return Ge(e.correlationId,n)}catch(n){return Gt.debug("Error trying to in invoke method",e.requestType,n),On(e.correlationId,n)}})}};var kn=class{constructor(e,t){this.messaging=e;this.idGenerator=t}get(e,t,n){return(...i)=>f(this,null,function*(){let o=this.idGenerator.generate(),{payload:a}=yield this.messaging.handle({type:"triptease.onboard.request",requestType:String(t),payload:i,correlationId:o});if(un(a))throw a;return a})}};function re(r,e=new jt){return new Proxy({},new kn(r,e))}var _n=x("messaging"),ne=class{constructor(e){this.messageHandler=e;this.promises=new Map;e&&e.addListener(t=>{if(We(t)){let{correlationId:n}=t,i=this.promises.get(n);i&&(_n.debug("Sender matched response",t),i.resolve(t),this.promises.delete(n))}})}handle(e){return f(this,null,function*(){return _n.debug("Sending request",e),this.messageHandler&&this.messageHandler.send(e),new Promise((t,n)=>{this.promises.set(e.correlationId,{resolve:t,reject:n})})})}};var Be=class{constructor(e,t,n=x("messaging")){this.listen=e;this.router=t;this.logger=n;this.rules=[];e.addListener(this.handler.bind(this)),this.addRule(Wt,i=>i,i=>i),this.addRule(fo,yo,Cn)}registerAlias(e,t){if(!this.router.hasHandlerFor(t))throw new Error(`Illegal alias: Method "${t}" is not registered with router`);return this.addRule(po(e),go(t),Cn)}handler(e,t){return f(this,null,function*(){if(We(e))return;this.logger.debug("listenOn received request",e);let n=this.rules.find(a=>a.predicate(e));if(!n)return;let i=n.requestConverter(e),o=yield this.router.handle(i);if(An(o)){this.logger.debug(`Handler not found for request "${i.requestType}", potentially for another listener`);return}e.correlationId&&e.correlationId===o.correlationId&&(this.logger.debug("listenOn sending response to sender",o),t.send(n.responseConverter(o)))})}addRule(e,t,n){return this.rules.push({predicate:e,requestConverter:t,responseConverter:n}),this}};function po(r){return e=>e.type===r}function fo(r){return!Wt(r)&&!!r.correlationId}function go(r){return e=>({type:"triptease.onboard.request",requestType:String(r),payload:[e],correlationId:e.correlationId||"fire-and-forget"})}function yo(r){let{value:e,correlationId:t}=r,{method:n}=Ct(r.type);return{type:"triptease.onboard.request",requestType:n,payload:[e],correlationId:t}}function Cn(r){return{type:"triptease.onboard.response",correlationId:r.correlationId,value:r.payload}}var Kt=class{constructor(e){this.storage=e}get(e){let t=this.storage.getItem(e);if(t)return j.parseWithDates(t)}set(e,t){return this.storage.setItem(e,JSON.stringify(t)),this}clear(){this.storage.clear()}},Ut=class{constructor(){this.data=new Map}get(e){return this.data.get(e)}set(e,t){return this.data.set(e,t)}clear(){this.data.clear()}};var ge=x("messaging"),Bt=class{constructor(e,t=new BroadcastChannel(Ft),n=new BroadcastChannel(Fe)){this.messageHandler=e;this.requests=t;this.responses=n;this.requests.addEventListener("message",i=>f(this,null,function*(){let o=i.data;ge.debug("BroadcastListener received request",o);let a=yield this.messageHandler.handle(o);this.responses.postMessage(a)}))}},Vt=class{constructor(e=50,t=new de,n=new BroadcastChannel(Ft),i=new BroadcastChannel(Fe)){this.timeout=e;this.timers=t;this.requests=n;this.responses=i;this.promises=new Map;this.payloads=new Map;this.responses.addEventListener("message",o=>{let a=o.data,{correlationId:s}=a;if(this.promises.get(s)){ge.debug("BroadcastSender received response, storing payload",a);let l=this.payloads.get(s)||[],{payload:h}=a;this.payloads.set(s,l.concat(h))}})}handle(e){return f(this,null,function*(){return ge.debug("Sending request",e),this.requests.postMessage(e),this.timers.setTimeout(()=>{ge.debug(`BroadcastSender timer fired after ${this.timeout} ms`);let{correlationId:t}=e,n=this.promises.get(t);if(n){let i=this.payloads.get(t)||[],o={correlationId:t,type:Fe,payload:i};ge.debug("BroadcastSender matched response",o),n.resolve(o),this.promises.delete(t),this.payloads.delete(t)}},this.timeout),new Promise((t,n)=>{this.promises.set(e.correlationId,{resolve:t,reject:n})})})}};var ye=class{constructor(e,t=re(new Vt)){this.receiver=e;this.sender=t;new Bt(new fe(e))}static create(e){return p(()=>new ye(e),e)}getAnonymousIds(){return f(this,null,function*(){return this.sender.getAnonymousIds()})}setAnonymousId(e){return this.sender.setAnonymousId(e)}};var me=class{constructor(e){this.providers=e}static create(...e){return new me(e)}getAnonymousIds(){return f(this,null,function*(){return F.unique(F.flatten(yield Promise.all(this.providers.map(e=>p(()=>e.getAnonymousIds(),[])))))})}setAnonymousId(e){return f(this,null,function*(){yield Promise.all(this.providers.map(t=>p(()=>t.setAnonymousId(e))))})}};var $t="triptease-anonymous-id",Ve=class{constructor(e){this.storage=e}getAnonymousIds(){return f(this,null,function*(){let e=this.storage.get($t);return e?[e]:[]})}setAnonymousId(e){return f(this,null,function*(){let t=this.storage.get($t);(t&&e<t||!t)&&this.storage.set($t,e)})}};var zt=class{constructor(e,t,n=ye.create(me.create(new Ve(new Ut),p(()=>new Ve(new Kt(e.localStorage))))),i=x("kernel"),o=le.create(e)){this.window=e;this.allowedOrigin=t;this.identityProvider=n;this.logger=i;this.starter=o}get triptease(){let e=this.window.triptease=this.window.triptease||{};return e.onboard={"kernel-host":this},sn(this,"triptease",e)}start(){return f(this,null,function*(){this.logger.debug("KernelHost starting"),this.triptease;let e=new Y(this.window,this.window.parent,[..._t,this.allowedOrigin],this.logger),t=yield this.starter.start(mo()),n=new Le(t),i=new ne(n);this.kernel=re(i);let o=new ne(e);this.bootstrap=re(o),new Be(e,this.router=new Ue().register(["getPageState","startApp","processConfig","getAnonymousIds","setAnonymousId"],new fe(this)).register(["generateConfig","applicationConfig"],i)).registerAlias("triptease.config","processConfig"),new Be(n,new Ue().register(["trackError","trackMessage"],o)),e.send({type:"triptease.onboard.kernel-host-started"}),this.logger.log("KernelHost started")})}startApp(e){return f(this,null,function*(){let t=yield this.starter.start(e),n=new ne(new Le(t));this.router.register(e.requestTypes,n)})}getAnonymousIds(){return this.identityProvider.getAnonymousIds()}setAnonymousId(e){return f(this,null,function*(){yield this.identityProvider.setAnonymousId(e)})}getPageState(){return f(this,null,function*(){return W.last})}processConfig(e){return f(this,null,function*(){let t=this.window;U(t).triptease.message=e;let n=qt(t.top),i=Pn(t,n);switch(this.logger.log(`Kernel Host is in ${i} mode`),i){case L.Singleton:return this.bootstrap.processConfig(qe(e,W.get(e.payload.type,Nt(e),e.payload.clientKey,e.payload.clientName,e.payload.apiKey)));case L.ApplicationHost:let o=Sn(n,e);return this.bootstrap.processConfig(o);case L.DataSource:let a=re(new ne(new Y(void 0,Ht(n))));return this.logger.log("Sending triptease.config message to kernel host in application host mode",e.payload),a.processConfig(e)}})}};function mo(){return{name:pe,url:`kernel.js?${Zr()}`,type:"worker",startMessage:`${pe}-started`,enabled:!0}}(()=>f(void 0,null,function*(){yield new zt(window,ue(location.search).originHost).start()}))();})();
//]]></script></head><body></body></html>